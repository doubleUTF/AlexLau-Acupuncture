<div class="container">
  <div class="row">
    <h2>Account Settings</h2>

    <tabset>
      <tab heading='Profile info'>
        <h3>Profile Information</h3>
        <div [@alertState]='personalAlertState'>
          <alert type="warning" *ngIf='profileForm.invalid && canView'>
            Your profile is incomplete, we will not be able to provide treatment until
            it is completed.
          </alert>
        </div>
        <div [@alertState]='profileSaved'>
          <alert type='success' *ngIf='profileSaved=="show"'>
            Profile updated!
          </alert>
        </div>
        <alert type='danger' *ngIf='errorPresent'>
          {{errorMessage}}
        </alert>

        <form class='form-horizontal' [formGroup]='profileForm' novalidate>
          <div class="row">
            <div class="text-center" style='padding-bottom:15px; padding-top:15px'>
              <!-- <button type='button' (click)='debug()' class='btn btn-default'>Debug</button> -->
              <button *ngIf='formDisabled' type='button' (click)='onEdit()' class='btn btn-primary'>
                <span class='glyphicon glyphicon-pencil' aria-hidden='true'></span>&nbsp;Edit</button>
              <button *ngIf='!formDisabled' (click)='onSave()' type="button"
               class="btn btn-success" [disabled]='!profileForm.valid|| profileForm.pristine'>
                <span class='glyphicon glyphicon-floppy-disk' aria-hidden='true'></span>&nbsp;Save</button>
              <button *ngIf='!formDisabled' (click)='onCancel()' type="button" class="btn btn-danger">
                <span class='glyphicon glyphicon-remove' aria-hidden='true'></span>&nbsp;Cancel</button>
            </div>
          </div>
          <fieldset [disabled]='formDisabled'>
            <div class="row">
              <div class="form-group col-sm-6">
                <label for="firstName" class='col-sm-4 control-label'>First Name</label>
                <div class="input-group col-sm-8">
                  <span class="input-group-addon"><i class="glyphicon glyphicon-user" aria-hidden='true'></i></span>
                  <input type="text" class="form-control" id="firstName" formControlName='firstName'>
                </div>
              </div>
              <div class="form-group col-sm-6">
                <label for="lastName" class='col-sm-4 control-label'>Last Name</label>
                <div class="input-group col-sm-8">
                   <span class="input-group-addon"><i class="glyphicon glyphicon-user" aria-hidden='true'></i></span>
                  <input type="text" class="form-control" id="lastName" formControlName='lastName'>
                </div>
              </div>
            </div>

          <div class="row">
            <div class="form-group col-sm-6">
              <label for="gender" class='col-sm-4 control-label'>Gender</label>
              <div class="input-group col-sm-8">
                <label class="radio-inline">
                  <input type="radio" name="gender" id="maleRadio"
                   value="male" formControlName='gender'>Male
                </label>
                <label class="radio-inline">
                  <input type="radio" name="gender" id="femaleRadio"
                   value="female" formControlName='gender'>Female
                </label>
              </div>
            </div>
            <div class="form-group col-sm-6" *ngIf='profileForm.value.gender=="female"'>
              <label for="pregnant" class='col-sm-5 control-label'>Pregnant</label>
              <div class="input-group col-sm-7">
                <label for="no" class="radio-inline">
                  <input type="radio" name="pregnant" id="noRadio"
                   [value]="false" formControlName='pregnant'>No
                </label>
                <label for="yes" class='radio-inline'>
                  <input type="radio" name="pregnant" id="yesRadio"
                   [value]="true" formControlName='pregnant'>Yes
                </label>
              </div>
            </div>
          </div>

        <div class="row">
          <div class="form-group col-sm-6">
            <label for="primaryPhone" class='col-sm-4 control-label'>Primary phone</label>
            <div class="input-group col-sm-8">
              <span class="input-group-addon"><i class='glyphicon glyphicon-earphone' aria-hidden='true'></i></span>
              <input [textMask]='{mask:phoneMask}' type="text" id="primaryPhone" class='form-control'
              placeholder='(___) ___-____' formControlName='primaryPhone'>
            </div>
          </div>
          <div class="form-group col-sm-6">
            <label for="secondaryPhone" class='col-sm-4 control-label'>Secondary phone</label>
            <div class="input-group col-sm-8">
              <span class="input-group-addon"><i class='glyphicon glyphicon-earphone' aria-hidden='true'></i></span>
              <input [textMask]='{mask:phoneMask}' type="text" id="secondaryPhone" class='form-control'
              placeholder='(___) ___-____' formControlName='secondaryPhone'>
            </div>
          </div>
        </div>

        <div class="row">
          <div class="col-sm-6 form-group">
            <label for="referredBy" class='col-sm-4 control-label'>Referred by</label>
            <div class="input-group col-sm-8">
              <span class="input-group-addon"><i class="glyphicon glyphicon-user" aria-hidden='true'></i></span>
              <input type="text" class="form-control" id="referredBy" formControlName='referredBy'>
            </div>
          </div>

          <div class="form-group col-sm-6">
            <label for="dateOfBirth" class='col-sm-4 control-label'>Date of Birth</label>
            <div class="input-group col-sm-8">
              <span class="input-group-addon"><i class='glyphicon glyphicon-calendar' aria-hidden='true'></i></span>
              <input [textMask]='{mask:dobMask}' type="text" id="dateOfBirth" class='form-control'
              placeholder='mm/dd/yyyy' formControlName='dateOfBirth'>
            </div>
          </div>
        </div>

      <div formGroupName='address'>
        <div class="row">
          <div class="form-group col-sm-6">
            <label for="address" class='col-sm-4 control-label'>Street Address</label>
            <div class="input-group col-sm-8">
             <span class="input-group-addon"><i class="glyphicon glyphicon-home" aria-hidden='true'></i></span>
              <input type="text" class="form-control" id="address" formControlName='street'>
            </div>
          </div>
          <div class="form-group col-sm-6">
            <label for="email" class='col-sm-4 control-label'>City</label>
            <div class="input-group col-sm-8">
             <span class="input-group-addon"><i class="fa fa-building" aria-hidden='true'></i></span>
              <input type="text" class="form-control" id="city" formControlName='city'>
            </div>
          </div>
        </div>

        <div class="row">
          <div class="form-group col-sm-6">
          <label for="email" class='col-sm-4 control-label'>State</label>
          <div class="input-group col-sm-8">
           <span class="input-group-addon"><i class="glyphicon glyphicon-th-list" aria-hidden='true'></i></span>
           <select name="state" class="form-control selectpicker" formControlName='state'>
          <option value="" >Please select your state</option>
          <option value='AL'>Alabama</option>
          <option value='AK'>Alaska</option>
          <option value='AZ'>Arizona</option>
          <option value='AR'>Arkansas</option>
          <option value='CA'>California</option>
          <option value='CO'>Colorado</option>
          <option value='CT'>Connecticut</option>
          <option value='DE'>Delaware</option>
          <option value='DC'>District of Columbia</option>
          <option value='FL'>Florida</option>
          <option value='GA'>Georgia</option>
          <option value='HI'>Hawaii</option>
          <option value='ID'>Idaho</option>
          <option value='IL'>Illinois</option>
          <option value='IN'>Indiana</option>
          <option value='IA'>Iowa</option>
          <option value='KS'> Kansas</option>
          <option value='KY'>Kentucky</option>
          <option value='LA'>Louisiana</option>
          <option value='ME'>Maine</option>
          <option value='MD'>Maryland</option>
          <option value='MA'>Massachusetts</option>
          <option value='MI'>Michigan</option>
          <option value='MN'>Minnesota</option>
          <option value='MS'>Mississippi</option>
          <option value='MO'>Missouri</option>
          <option value='MT'>Montana</option>
          <option value='NE'>Nebraska</option>
          <option value='NV'>Nevada</option>
          <option value='NH'>New Hampshire</option>
          <option value='NJ'>New Jersey</option>
          <option value='NM'>New Mexico</option>
          <option value='NY'>New York</option>
          <option value='NC'>North Carolina</option>
          <option value='ND'>North Dakota</option>
          <option value='OH'>Ohio</option>
          <option value='OK'>Oklahoma</option>
          <option value='OR'>Oregon</option>
          <option value='PA'>Pennsylvania</option>
          <option value='RI'>Rhode Island</option>
          <option value='SC'>South Carolina</option>
          <option value='SD'>South Dakota</option>
          <option value='TN'>Tennessee</option>
          <option value='TX'>Texas</option>
          <option value='UT'>Utah</option>
          <option value='VT'>Vermont</option>
          <option value='VA'>Virginia</option>
          <option value='WA'>Washington</option>
          <option value='WV'>West Virginia</option>
          <option value='WI'>Wisconsin</option>
          <option value='WY'>Wyoming</option>
          </select>
          </div>
          </div>

          <div class="form-group col-sm-6">
            <label for="zip" class='col-sm-4 control-label'>Zip code</label>
            <div class="input-group col-sm-8">
             <span class="input-group-addon"><i class="glyphicon glyphicon-home"></i></span>
              <input type="text" class="form-control" id="zip" formControlName='zip'
              maxlength="5">
            </div>
          </div>
        </div>
      </div>

        <div class="row">
          <div class="form-group col-sm-6">
            <label for="emergencyContact" class='col-sm-4 control-label'>Emergency contact</label>
            <div class="input-group col-sm-8">
             <span class="input-group-addon"><i class="glyphicon glyphicon-user" aria-hidden='true'></i></span>
             <input type="text" class="form-control col-sm-8" id="emergencyContact"
              formControlName='emergencyContact'>
            </div>
          </div>

          <div class="form-group col-sm-6">
            <label for="emergencyPhone" class='col-sm-4 control-label'>Emergency phone</label>
            <div class="input-group col-sm-8">
              <span class="input-group-addon"><i class='glyphicon glyphicon-earphone' aria-hidden='true'></i></span>
              <input [textMask]='{mask:phoneMask}' type="text" id="emergencyPhone" class='form-control'
              placeholder='(___) ___-____' formControlName='emergencyPhone'>
            </div>
          </div>
        </div>

        </fieldset>
        </form>
      </tab>

      <tab heading='Insurances'>
        <app-insurances [insurances]='insurances'
        [profileComplete]='profileComplete'></app-insurances>
      </tab>

      <tab heading='Email'>
        <h3>Update Email</h3>
        <div [@alertState]='emailAlertState'>
          <alert type='success' *ngIf='emailSaved'>
            Your email has successfully been updated to {{newEmail}}
          </alert>
        </div>
        <div class="row" style='padding-top:20px'>
          <div class="col-md-6 col-md-offset-3">
            <form class='form-horizontal' [formGroup]='emailForm' novalidate>
              <div class="form-group">
                <label for="currentEmail" class='col-sm-4'>Current Email</label>
                <div class="input-group col-sm-8">
                  <span class="input-group-addon"><i class="fa fa-at" aria-hidden='true'></i></span>
                  <input type="email" class='form-control' id='currentEmail' formControlName='currentEmail'>
                </div>
                </div>

              <div class="form-group">
                <label for="newEmail" class='col-sm-4'>New Email</label>
                <div class="input-group col-sm-8">
                  <span class="input-group-addon"><i class="fa fa-at" aria-hidden='true'></i></span>
                  <input validateEqual='retypeEmail' type="email" class='form-control'
                  id='newEmail' formControlName='newEmail' reverse='true'>
                </div>
                <small [hidden]="emailForm.controls.newEmail.valid || emailForm.controls.newEmail.pristine" class="text-danger">
      Email is required and format should be <i>john@doe.com</i>.</small>
              </div>
              <div class="form-group">
                <label for="retypeEmail" class='col-sm-4'>Retype New Email</label>
                <div class="input-group col-sm-8">
                  <span class="input-group-addon"><i class="fa fa-at" aria-hidden='true'></i></span>
                  <input validateEqual='newEmail' type="email" class='form-control'
                  id='retypeEmail' formControlName='retypeEmail' reverse='false'>
                </div>
                <small [hidden]="emailForm.controls.retypeEmail.valid || emailForm.controls.retypeEmail.pristine" class="text-danger">
                  Email must match with new email.</small>
              </div>
              <div class="col-sm-8 col-sm-push-4">
                <button [disabled]='emailForm.invalid || emailSaved' type='button' class='btn btn-success' (click)='onUpdateEmail()'>
                  <span class='glyphicon glyphicon-floppy-disk' aria-hidden='true'></span>&nbsp;Save new email</button>
              </div>
            </form>
          </div>
        </div>

      </tab>
      <tab heading='Password'>
        <h3>Update Password</h3>
          <div class="row">
            <div [@alertState]='passwordAlertState'>
              <alert type='success' *ngIf='passwordSaved'>
                Password has been succesfully updated
              </alert>
              <alert type='danger' *ngIf='passwordUnsuccessful'>
                Could not update password, entered password is incorrect
              </alert>
            </div>
            <div class="col-sm-6 col-sm-push-3">
            <form class='form-horizontal' [formGroup]='passwordForm'>
              <div class="form-group">
                <label for="currentPassword" class='col-sm-4'>Current password</label>
                <div class="input-group col-sm-8">
                  <span class="input-group-addon"><i class="fa fa-key" aria-hidden='true'></i></span>
                  <input type="password" class='form-control' id='currentPassword'
                  formControlName='currentPassword'>
                </div>
              </div>
              <div class="form-group">
                <label for="newPassword" class='col-sm-4'>New password</label>
                <div class="input-group col-sm-8">
                  <span class="input-group-addon"><i class="fa fa-unlock-alt" aria-hidden='true'></i></span>
                  <input type="password" class='form-control' id='newPassword' reverse='true'
                  formControlName='newPassword' validateEqual='retypePassword'>
                </div>
                <small [hidden]="passwordForm.controls.newPassword.valid || passwordForm.controls.newPassword.pristine" class="text-danger">
                  New password must be 6 characters in length or greater.</small>
              </div>
              <div class="form-group">
                <label for="retypePassword" class='col-sm-4'>Retype password</label>
                <div class="input-group col-sm-8">
                  <span class="input-group-addon"><i class="fa fa-unlock-alt" aria-hidden='true'></i></span>
                  <input type="password" class='form-control' id='retypePassword' reverse='false'
                  formControlName='retypePassword' validateEqual='newPassword'>
                </div>
                <small [hidden]="passwordForm.controls.retypePassword.valid || passwordForm.controls.retypePassword.pristine" class="text-danger">
                  Passwords must match</small>
              </div>
              <div class="col-sm-8 col-sm-push-4">
                <button [disabled]='passwordForm.invalid || passwordSaved' type='button' class='btn btn-success' (click)='onUpdatePassword()'>
                  <span class='glyphicon glyphicon-floppy-disk' aria-hidden='true'></span>&nbsp;Save new password</button>
              </div>
            </form>
            </div>
          </div>
      </tab>
    </tabset>

  </div>
</div>
